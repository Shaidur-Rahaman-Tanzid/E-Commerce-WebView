<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

		<title>PC-Shop - Checkout</title>

 		<!-- Google font -->
 		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

 		<!-- Bootstrap -->
 		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>

 		<!-- Slick -->
 		<link type="text/css" rel="stylesheet" href="css/slick.css"/>
 		<link type="text/css" rel="stylesheet" href="css/slick-theme.css"/>

 		<!-- nouislider -->
 		<link type="text/css" rel="stylesheet" href="css/nouislider.min.css"/>

 		<!-- Font Awesome Icon -->
 		<link rel="stylesheet" href="css/font-awesome.min.css">

 		<!-- Custom stlylesheet -->
 		<link type="text/css" rel="stylesheet" href="css/style.css"/>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/dataSource.js"></script>
		<script src="js/main.js"></script>
		<script src="js/function.js"></script>
		
		<script>
			// Scripts loaded successfully
		</script>

		<style>
			/* Checkout specific styles */
			.cart-item {
				display: flex;
				align-items: center;
				padding: 15px 0;
				border-bottom: 1px solid #eee;
			}
			
			.cart-item:last-child {
				border-bottom: none;
			}
			
			.cart-item-img {
				width: 80px;
				height: 80px;
				margin-right: 15px;
				border-radius: 8px;
				overflow: hidden;
			}
			
			.cart-item-img img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}
			
			.cart-item-details {
				flex: 1;
			}
			
			.cart-item-name {
				font-weight: 600;
				margin-bottom: 5px;
				color: #333;
			}
			
			.cart-item-price {
				color: #D10024;
				font-weight: 600;
			}
			
			.quantity-controls {
				display: flex;
				align-items: center;
				gap: 10px;
				margin-top: 10px;
			}
			
			.quantity-btn {
				width: 30px;
				height: 30px;
				border: 1px solid #ddd;
				background: #fff;
				border-radius: 4px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				font-weight: bold;
			}
			
			.quantity-btn:hover {
				background: #f5f5f5;
			}
			
			.quantity-input {
				width: 50px;
				height: 30px;
				text-align: center;
				border: 1px solid #ddd;
				border-radius: 4px;
			}
			
			.remove-item {
				background: none;
				border: none;
				color: #D10024;
				cursor: pointer;
				font-size: 16px;
				margin-left: 10px;
			}
			
			.remove-item:hover {
				color: #b3001f;
			}
			
			.order-summary {
				background: #f8f9fa;
				padding: 20px;
				border-radius: 8px;
				margin-bottom: 20px;
			}
			
			.order-row {
				display: flex;
				justify-content: space-between;
				padding: 8px 0;
				border-bottom: 1px solid #eee;
			}
			
			.order-row:last-child {
				border-bottom: none;
				font-weight: bold;
				font-size: 18px;
				color: #D10024;
			}
			
			.empty-cart {
				text-align: center;
				padding: 40px 20px;
				color: #666;
			}
			
			.empty-cart i {
				font-size: 4rem;
				color: #ddd;
				margin-bottom: 20px;
			}
			
			.payment-method {
				margin: 20px 0;
			}
			
			.payment-option {
				display: flex;
				align-items: center;
				padding: 15px;
				border: 2px solid #eee;
				border-radius: 8px;
				margin-bottom: 10px;
				cursor: pointer;
				transition: all 0.3s ease;
			}
			
			.payment-option:hover {
				border-color: #D10024;
			}
			
			.payment-option.selected {
				border-color: #D10024;
				background: #fff5f5;
			}
			
			.payment-option input[type="radio"] {
				margin-right: 10px;
			}
			
			.payment-option label {
				margin: 0;
				cursor: pointer;
				font-weight: 600;
			}
			
			.payment-number {
				margin-top: 10px;
				padding: 10px;
				background: #f8f9fa;
				border-radius: 4px;
				font-size: 14px;
				color: #666;
			}

			/* Terms Modal Styles */
			.terms-content {
				max-height: 400px;
				overflow-y: auto;
				padding: 10px;
			}

			.terms-content h5 {
				color: #D10024;
				font-weight: 600;
				margin-top: 20px;
				margin-bottom: 10px;
				font-size: 16px;
			}

			.terms-content h5:first-child {
				margin-top: 0;
			}

			.terms-content p {
				color: #333;
				line-height: 1.6;
				margin-bottom: 15px;
				font-size: 14px;
			}

			.terms-content ul {
				margin-bottom: 15px;
				padding-left: 20px;
			}

			.terms-content li {
				color: #333;
				line-height: 1.6;
				margin-bottom: 5px;
				font-size: 14px;
			}

			.modal-lg {
				max-width: 800px;
			}

			.modal-header {
				background: #f8f9fa;
				border-bottom: 1px solid #dee2e6;
			}

			.modal-title i {
				margin-right: 8px;
				color: #D10024;
			}

			/* Payment Modal Styles */
			.payment-confirmation {
				padding: 10px;
			}

			.payment-method-info {
				background: #f8f9fa;
				padding: 15px;
				border-radius: 8px;
				margin-bottom: 20px;
				border-left: 4px solid #D10024;
			}

			.payment-method-info h5 {
				color: #D10024;
				margin-bottom: 10px;
				font-weight: 600;
			}

			.payment-method-info h5 i {
				margin-right: 8px;
			}

			.payment-method-info p {
				color: #666;
				margin: 0;
			}

			.payment-summary {
				background: #fff;
				border: 1px solid #dee2e6;
				border-radius: 8px;
				padding: 15px;
				margin-bottom: 20px;
			}

			.payment-summary h5 {
				color: #333;
				font-weight: 600;
				margin-bottom: 15px;
				border-bottom: 1px solid #eee;
				padding-bottom: 10px;
			}

			.summary-item {
				display: flex;
				justify-content: space-between;
				padding: 8px 0;
				border-bottom: 1px solid #f0f0f0;
			}

			.summary-item:last-child {
				border-bottom: none;
			}

			.summary-item.total {
				font-weight: 600;
				font-size: 16px;
				color: #D10024;
				border-top: 2px solid #D10024;
				margin-top: 10px;
				padding-top: 15px;
			}

			.payment-notice {
				background: #e7f3ff;
				border: 1px solid #b3d9ff;
				border-radius: 6px;
				padding: 12px;
				margin-top: 15px;
			}

			.payment-notice p {
				margin: 0;
				color: #0066cc;
				font-size: 14px;
			}

			.payment-notice i {
				margin-right: 5px;
			}

			.form-group label {
				font-weight: 600;
				color: #333;
				margin-bottom: 5px;
			}

			.help-block {
				color: #666;
				font-size: 12px;
				margin-top: 5px;
			}

			/* Disabled button styles */
			.btn-disabled {
				opacity: 0.6;
				cursor: not-allowed !important;
			}

			.btn-disabled:hover {
				background-color: #D10024 !important;
				border-color: #D10024 !important;
			}

			/* Custom Alert Box */
			.custom-alert {
				position: fixed;
				top: 20px;
				right: 20px;
				background: #fff;
				border-radius: 8px;
				box-shadow: 0 4px 20px rgba(0,0,0,0.15);
				padding: 15px 20px;
				z-index: 9999;
				transform: translateX(400px);
				transition: transform 0.3s ease;
				max-width: 300px;
				border-left: 4px solid #D10024;
			}
			
			.custom-alert.show {
				transform: translateX(0);
			}
			
			.custom-alert.success {
				border-left-color: #28a745;
			}
			
			.custom-alert.error {
				border-left-color: #dc3545;
			}
			
			.custom-alert.info {
				border-left-color: #17a2b8;
			}
			
			.custom-alert .alert-content {
				display: flex;
				align-items: center;
				gap: 10px;
			}
			
			.custom-alert .alert-icon {
				font-size: 18px;
				color: #D10024;
			}
			
			.custom-alert.success .alert-icon {
				color: #28a745;
			}
			
			.custom-alert.error .alert-icon {
				color: #dc3545;
			}
			
			.custom-alert.info .alert-icon {
				color: #17a2b8;
			}
			
			.custom-alert .alert-message {
				font-size: 14px;
				color: #333;
				font-weight: 500;
			}
		</style>
	</head>
	<body>
		<!-- HEADER -->
		<header>
			<!-- TOP HEADER -->
			<div id="top-header">
				<div class="container">
					<ul class="header-links pull-left">
						<li><a href="#"><i class="fa fa-phone"></i> +8801706782347</a></li>
						<li><a href="#"><i class="fa fa-envelope-o"></i> sahidtanzid2014@gmail.com</a></li>
						<li><a href="#"><i class="fa fa-map-marker"></i> Rajshshi, Bangladesh</a></li>
					</ul>
					<ul class="header-links pull-right">
						<li><a href="profile.html"><i class="fa fa-user-o"></i> Profile</a></li>
						<li><a href="login.html" id="checkout-auth-link"><i class="fa fa-user-o auth-link"></i> LogIn</a></li>
					</ul>
				</div>
			</div>
			<!-- /TOP HEADER -->

			<!-- MAIN HEADER -->
			<div id="header">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<!-- LOGO -->
						<div class="col-md-3">
							<div class="header-logo">
								<a href="index.html" class="logo">
									<span style="
										font-size: xxx-large;
										color: #D10024;
									">PC-Shop</span>
								</a>
							</div>
						</div>
						<!-- /LOGO -->

						<!-- SEARCH BAR -->
						<div class="col-md-6">
							<div class="header-search">
								<form id="headerSearchForm" onsubmit="performSearch(event)">
									<select class="input-select" name="search-category" id="search-category" title="Select category">
										<option value="">All Categories</option>
									</select>
									<input class="input" id="header-search-input" placeholder="Search here" name="search-term">
									<button type="submit" class="search-btn">Search</button>
								</form>
							</div>
						</div>
						<!-- /SEARCH BAR -->

						<!-- ACCOUNT -->
						<div class="col-md-3 clearfix">
							<div class="header-ctn">
								<!-- Wishlist -->
								<div>
									<a href="wishlist-page.html">
										<i class="fa fa-heart-o"></i>
										<span>Your Wishlist</span>
										<div class="qty" id="wishlist-count">0</div>
									</a>
								</div>
								<!-- /Wishlist -->

								<!-- Cart -->
								<div class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown" onclick="handleCartClick(event)">
										<i class="fa fa-shopping-cart"></i>
										<span>Your Cart</span>
										<div class="qty" id="cart-count">0</div>
									</a>
									<div class="cart-dropdown">
										<div class="cart-list" id="cart-dropdown-list">
											<!-- Cart items will be loaded here -->
										</div>
										<div class="cart-summary">
											<small id="cart-summary-text">0 Item(s) selected</small>
											<h5 id="cart-subtotal">SUBTOTAL: ৳0.00</h5>
										</div>
										<div class="cart-btns">
											<a href="checkout.html">View Cart</a>
											<a href="checkout.html">Checkout <i class="fa fa-arrow-circle-right"></i></a>
										</div>
									</div>
								</div>
								<!-- /Cart -->

								<!-- Menu Toogle -->
								<div class="menu-toggle">
									<a href="#">
										<i class="fa fa-bars"></i>
										<span>Menu</span>
									</a>
								</div>
								<!-- /Menu Toogle -->
							</div>
						</div>
						<!-- /ACCOUNT -->
					</div>
					<!-- row -->
				</div>
				<!-- container -->
			</div>
			<!-- /MAIN HEADER -->
		</header>
		<!-- /HEADER -->

		<!-- Custom Alert Box -->
		<div id="customAlert" class="custom-alert" style="display: none;">
			<div class="alert-content">
				<i class="alert-icon fa fa-info-circle"></i>
				<span class="alert-message">Message here</span>
			</div>
		</div>

		<!-- BREADCRUMB -->
		<div id="breadcrumb" class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<div class="col-md-12">
						<h3 class="breadcrumb-header">Checkout</h3>
						<ul class="breadcrumb-tree">
							<li><a href="index.html">Home</a></li>
							<li><a href="store.html">Store</a></li>
							<li class="active">Checkout</li>
						</ul>
					</div>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /BREADCRUMB -->

		<!-- SECTION -->
		<div class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">

					<div class="col-md-7">
						<!-- Billing Details -->
						<div class="billing-details">
							<div class="section-title">
								<h3 class="title">Shipping & Billing Address</h3>
							</div>
							<div class="form-group">
								<input class="input" type="text" id="user-name" name="name" placeholder="Name" required>
							</div>
							<div class="form-group">
								<input class="input" type="email" id="user-email" name="email" placeholder="Email" required>
							</div>
							<div class="form-group">
								<input class="input" type="tel" id="user-phone" name="phone" placeholder="Phone Number" required>
							</div>
							<div class="form-group">
								<input class="input" type="text" id="user-address" name="address" placeholder="Address" required>
							</div>
							<div class="form-group">
								<textarea class="input" id="user-notes" name="notes" placeholder="Order Notes (Optional)" rows="3"></textarea>
							</div>
						</div>
						<!-- /Billing Details -->
					</div>

					<!-- Order Details -->
					<div class="col-md-5 order-details">
						<div class="section-title text-center">
							<h3 class="title">Your Order</h3>
						</div>
						
						<!-- Cart Items -->
						<div id="checkout-cart-items">
							<!-- Cart items will be loaded here -->
						</div>
						
						<!-- Order Summary -->
						<div class="order-summary">
							<div class="order-row">
								<div>Subtotal</div>
								<div id="order-subtotal">৳0.00</div>
							</div>
							<div class="order-row">
								<div>Shipping</div>
								<div><strong>FREE</strong></div>
							</div>
							<div class="order-row">
								<div><strong>TOTAL</strong></div>
								<div><strong id="order-total">৳0.00</strong></div>
							</div>
						</div>
						
						<!-- Payment Method -->
						<div class="payment-method">
							<h4>Payment Method</h4>
							<div class="payment-option selected" onclick="selectPayment('bkash')">
								<input type="radio" name="payment" id="payment-bkash" value="bkash" checked>
								<label for="payment-bkash">BKash Payment</label>
								<!-- <div class="payment-number">Number: 01706782347</div> -->
							</div>
							<div class="payment-option" onclick="selectPayment('nagad')">
								<input type="radio" name="payment" id="payment-nagad" value="nagad">
								<label for="payment-nagad">Nagad Payment</label>
								<!-- <div class="payment-number">Number: 01706782347</div> -->
							</div>
						</div>
						
													<div class="input-checkbox">
								<input type="checkbox" id="terms" required>
								<label for="terms">
									<span></span>
									I've read and accept the <a href="#" onclick="showTermsModal()">terms & conditions</a>
								</label>
							</div>
						<button id="place-order-btn" class="primary-btn order-submit" onclick="placeOrder()" disabled>Place order</button>
					</div>
					<!-- /Order Details -->
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /SECTION -->

		<!-- Payment Confirmation Modal -->
		<div class="modal fade" id="paymentModal" tabindex="-1" role="dialog" aria-labelledby="paymentModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="paymentModalLabel">
							<i class="fa fa-credit-card"></i> Payment Confirmation
						</h4>
					</div>
					<div class="modal-body">
						<div class="payment-confirmation">
							<div class="payment-method-info">
								<h5><i class="fa fa-mobile"></i> Mobile Banking Payment</h5>
								<p>Please enter your mobile number to receive payment confirmation.</p>
							</div>
							
							<div class="form-group">
								<label for="paymentPhone">Mobile Number:</label>
								<input type="tel" class="form-control" id="paymentPhone" placeholder="01XXXXXXXXX" maxlength="11" required>
								<small class="help-block">Enter your 11-digit mobile number</small>
							</div>
							
							<div class="payment-summary">
								<h5>Payment Summary</h5>
								<div class="summary-item">
									<span>Payment Method:</span>
									<span id="paymentMethodDisplay">BKash</span>
								</div>
								<div class="summary-item">
									<span>Total Amount:</span>
									<span id="paymentAmountDisplay">৳0.00</span>
								</div>
								<div class="summary-item">
									<span>Transaction Fee:</span>
									<span>৳10.00</span>
								</div>
								<div class="summary-item total">
									<span>Total to Pay:</span>
									<span id="paymentTotalDisplay">৳0.00</span>
								</div>
							</div>
							
							<div class="payment-notice">
								<p><i class="fa fa-info-circle"></i> You will receive an SMS with payment instructions.</p>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-success" onclick="confirmPayment()">
							<i class="fa fa-check"></i> Confirm Payment
						</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Terms & Conditions Modal -->
		<div class="modal fade" id="termsModal" tabindex="-1" role="dialog" aria-labelledby="termsModalLabel">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="termsModalLabel">
							<i class="fa fa-file-text"></i> Terms & Conditions
						</h4>
					</div>
					<div class="modal-body">
						<div class="terms-content">
							<h5>1. Acceptance of Terms</h5>
							<p>By accessing and using PC-Shop's website and services, you accept and agree to be bound by the terms and provision of this agreement.</p>
							
							<h5>2. Product Information</h5>
							<p>We strive to provide accurate product information, including descriptions, prices, and availability. However, we do not warrant that product descriptions or other content is accurate, complete, reliable, current, or error-free.</p>
							
							<h5>3. Pricing and Payment</h5>
							<p>All prices are listed in Bangladeshi Taka (৳) and are subject to change without notice. Payment must be made in full at the time of order placement through our accepted payment methods.</p>
							
							<h5>4. Order Processing</h5>
							<p>Orders are processed on a first-come, first-served basis. We reserve the right to refuse service, terminate accounts, or cancel orders at our sole discretion.</p>
							
							<h5>5. Shipping and Delivery</h5>
							<p>Delivery times are estimates only. We are not responsible for delays beyond our control. Risk of loss and title for items purchased pass to you upon delivery.</p>
							
							<h5>6. Returns and Refunds</h5>
							<p>Products may be returned within 7 days of delivery if they are defective or not as described. Return shipping costs are the responsibility of the customer unless the item is defective.</p>
							
							<h5>7. Warranty</h5>
							<p>Products come with manufacturer warranties as applicable. Our warranty covers defects in materials and workmanship for the specified warranty period.</p>
							
							<h5>8. Privacy Policy</h5>
							<p>Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the website, to understand our practices.</p>
							
							<h5>9. Limitation of Liability</h5>
							<p>PC-Shop shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of our services.</p>
							
							<h5>10. Governing Law</h5>
							<p>These terms shall be governed by and construed in accordance with the laws of Bangladesh, without regard to its conflict of law provisions.</p>
							
							<h5>11. Contact Information</h5>
							<p>For questions about these Terms & Conditions, please contact us at:</p>
							<ul>
								<li>Email: sahidtanzid2014@gmail.com</li>
								<li>Phone: +8801706782347</li>
								<li>Address: Rajshahi, Bangladesh</li>
							</ul>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary" onclick="acceptTerms()">I Accept</button>
					</div>
				</div>
			</div>
		</div>

		<!-- FOOTER -->
		<footer id="footer">
			<!-- top footer -->
			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">About Us</h3>
								<p>We provide high-quality PC components for gamers, builders, and tech enthusiasts. From GPUs to cooling systems, we're your trusted source for performance and reliability.</p>
								<ul class="footer-links">
									<li><a href="#"><i class="fa fa-map-marker"></i>Rajshshi, Bangladesh</a></li>
									<li><a href="#"><i class="fa fa-phone"></i>+8801706782347</a></li>
									<li><a href="#"><i class="fa fa-envelope-o"></i>sahidtanzid2014@gmail.com</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Categories</h3>
								<ul class="footer-links">
									<li><a href="#">Hot deals</a></li>
									<li><a href="#">Laptops</a></li>
									<li><a href="#">Smartphones</a></li>
									<li><a href="#">Cameras</a></li>
									<li><a href="#">Accessories</a></li>
								</ul>
							</div>
						</div>

						<div class="clearfix visible-xs"></div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Information</h3>
								<ul class="footer-links">
									<li><a href="#">About Us</a></li>
									<li><a href="#">Contact Us</a></li>
									<li><a href="#">Privacy Policy</a></li>
									<li><a href="#">Orders and Returns</a></li>
									<li><a href="#">Terms & Conditions</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Service</h3>
								<ul class="footer-links">
									<li><a href="#">My Account</a></li>
									<li><a href="#">View Cart</a></li>
									<li><a href="wishlist-page.html">Wishlist</a></li>
									<li><a href="#">Track My Order</a></li>
									<li><a href="#">Help</a></li>
								</ul>
							</div>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->

			<!-- bottom footer -->
			<div id="bottom-footer" class="section">
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-12 text-center">
							<ul class="footer-payments">
								<li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
								<li><a href="#"><i class="fa fa-credit-card"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
								<li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
							</ul>
							<span class="copyright">
								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							</span>
						</div>
					</div>
						<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /bottom footer -->
		</footer>
		<!-- /FOOTER -->

		<!-- jQuery Plugins -->
		<script src="js/bootstrap.min.js"></script>
		<script src="js/slick.min.js"></script>
		<script src="js/nouislider.min.js"></script>
		<script src="js/jquery.zoom.min.js"></script>

		<script>
			// Custom Alert Function
			function showCustomAlert(message, type = 'info') {
				const alertBox = document.getElementById('customAlert');
				const alertIcon = alertBox.querySelector('.alert-icon');
				const alertMessage = alertBox.querySelector('.alert-message');
				
				// Set message
				alertMessage.textContent = message;
				
				// Set type and icon
				alertBox.className = `custom-alert ${type}`;
				
				switch(type) {
					case 'success':
						alertIcon.className = 'alert-icon fa fa-check-circle';
						break;
					case 'error':
						alertIcon.className = 'alert-icon fa fa-times-circle';
						break;
					case 'info':
					default:
						alertIcon.className = 'alert-icon fa fa-info-circle';
						break;
				}
				
				// Show alert
				alertBox.style.display = 'block';
				setTimeout(() => {
					alertBox.classList.add('show');
				}, 100);
				
				// Auto hide after 2 seconds
				setTimeout(() => {
					alertBox.classList.remove('show');
					setTimeout(() => {
						alertBox.style.display = 'none';
					}, 300);
				}, 2000);
			}

			// Global variables
			let cartItems = [];
			let selectedPayment = 'bkash'; // Set BKash as default

			// ========================================
			// CART FUNCTIONALITY
			// ========================================

			// Get wishlist from current user
			function getWishlist() {
				const user = getCurrentUser();
				return user && Array.isArray(user.wishlist) ? user.wishlist : [];
			}
			function updateWishlistCount() {
				const wishlist = getWishlist();
				const countElement = document.getElementById('wishlist-count');
				if (countElement) {
					countElement.textContent = wishlist.length;
				}
			}
			// CART FUNCTIONALITY
			function getCart() {
				const user = getCurrentUser();
				
				if (!user) {
					return [];
				}
				
				if (!Array.isArray(user.cartItems)) {
					return [];
				}
				
				return user.cartItems;
			}
			function saveCart(cart) {
				const user = getCurrentUser();
				if (user) {
					user.cartItems = cart;
					setCurrentUser(user);
				}
				updateCartCount();
			}
			function updateCartCount() {
				const cart = getCart();
				const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
				const countElement = document.getElementById('cart-count');
				if (countElement) {
					countElement.textContent = totalItems;
				}
			}
			function handleCartClick(event) {
				const userId = getCurrentUserId();
				if (!userId) {
					// If not logged in, do nothing
					return;
				}
				const cart = getCart();
				const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
				if (totalItems > 0) {
					// Prevent dropdown from opening
					event.preventDefault();
					event.stopPropagation();
					// Refresh the page to update cart display (since we're already on checkout)
					window.location.reload();
				}
				// If cart is empty, do nothing
			}
			function removeFromCart(productId) {
				const cart = getCart();
				const updatedCart = cart.filter(item => item.productId !== productId);
				saveCart(updatedCart);
				loadCheckoutCart();
			}
			function loadCheckoutCart() {
				const cart = getCart();
				const container = document.getElementById('checkout-cart-items');
				
				if (!container) {
					return;
				}
				
				if (cart.length === 0) {
					container.innerHTML = `
						<div class="empty-cart">
							<i class="fa fa-shopping-cart"></i>
							<h3>Your cart is empty</h3>
							<p>Add some products to your cart to continue with checkout</p>
							<a href="store.html" class="primary-btn">Continue Shopping</a>
						</div>
					`;
					const placeOrderBtn = document.getElementById('place-order-btn');
					if (placeOrderBtn) {
						placeOrderBtn.style.display = 'none';
					}
					return;
				}

				const placeOrderBtn = document.getElementById('place-order-btn');
				if (placeOrderBtn) {
					placeOrderBtn.style.display = 'block';
				}
				
				let html = '';
				let subtotal = 0;

				cart.forEach((item, index) => {
					const product = dataSource.products.find(p => p.productid === item.productId);
					
					if (product) {
						const itemTotal = product.finalprice * item.quantity;
						subtotal += itemTotal;
						const img = getProductImage(product.producttypename, product.productname);

						html += `
							<div class="cart-item">
								<div class="cart-item-img">
									<img src="./img/${img}" alt="${product.productname}">
								</div>
								<div class="cart-item-details">
									<div class="cart-item-name">${product.productname}</div>
									<div class="cart-item-price">৳${product.finalprice.toFixed(2)}</div>
									<div class="quantity-controls">
										<button class="quantity-btn" onclick="updateQuantity('${product.productid}', ${item.quantity - 1})" title="Decrease quantity">-</button>
										<input type="number" class="quantity-input" value="${item.quantity}" min="1" onchange="updateQuantity('${product.productid}', parseInt(this.value))">
										<button class="quantity-btn" onclick="updateQuantity('${product.productid}', ${item.quantity + 1})" title="Increase quantity">+</button>
										<button class="remove-item" onclick="removeFromCart('${product.productid}')" title="Remove item">
											<i class="fa fa-trash"></i>
										</button>
									</div>
								</div>
								<div class="cart-item-total">
									<strong>৳${itemTotal.toFixed(2)}</strong>
								</div>
							</div>
						`;
					}
				});

				container.innerHTML = html;
				
				// Update totals
				const subtotalElement = document.getElementById('order-subtotal');
				const totalElement = document.getElementById('order-total');
				if (subtotalElement) {
					subtotalElement.textContent = `৳${subtotal.toFixed(2)}`;
				}
				if (totalElement) {
					totalElement.textContent = `৳${subtotal.toFixed(2)}`;
				}
			}

			// Select payment method
			function selectPayment(method) {
				selectedPayment = method;
				
				// Update UI
				document.querySelectorAll('.payment-option').forEach(option => {
					option.classList.remove('selected');
				});
				
				event.currentTarget.classList.add('selected');
				document.getElementById(`payment-${method}`).checked = true;
			}

			function placeOrder(){
				const cart = getCart();
				
				if (cart.length === 0) {
					showCustomAlert('Your cart is empty!', 'error');
					return;
				}

				if (!selectedPayment) {
					showCustomAlert('Please select a payment method!', 'error');
					return;
				}

				// Validate form
				const requiredFields = ['user-name', 'user-email', 'user-phone', 'user-address'];
				for (let field of requiredFields) {
					const input = document.getElementById(field);
					if (!input || !input.value.trim()) {
						showCustomAlert(`${field} is required!`, 'error');
						return;
					}
				}

				// Calculate total amount
				const totalAmount = cart.reduce((sum, item) => {
					const product = dataSource.products.find(p => p.productid === item.productId);
					return sum + (product ? product.finalprice * item.quantity : 0);
				}, 0);

				// Show payment confirmation modal
				showPaymentModal(totalAmount);
			}
			// Place order
			function PaymentDone() {
				const cart = getCart();
				
				// Calculate total amount
				const totalAmount = cart.reduce((sum, item) => {
					const product = dataSource.products.find(p => p.productid === item.productId);
					return sum + (product ? product.finalprice * item.quantity : 0);
				}, 0);


				var orderList  = getOrdersFromStorage();
				var orderId = orderList.length > 0 ? Math.max(...orderList.map(o => o.orderId || 0)) + 1 : 1;
				// Create order object
				const order = {
					orderId: orderId,
					userId: getCurrentUserId(),
					orderDate: new Date().toISOString(),
					total: totalAmount,
					status: 'pending',
					paymentType: selectedPayment,
					transactionNo: 'TXN' + Math.floor(100000 + Math.random() * 900000), // Random 6-digit transaction number
					paymentTimestamp: new Date().toISOString(), // Set to current time
					items: cart.map(item => ({
						productId: item.id,
						quantity: item.quantity,
						priceAtPurchase: item.finalprice
					}))
				};

				// Save order to database
				addOrder(order);
				// saveOrder(order);
				showCustomAlert('Order placed successfully!', 'success');

				// Clear cart after successful order
				// clearCart();
				// Optionally, update user cartItems if you store cart in user object
				const user = getCurrentUser();
				if (user) {
					user.cartItems = [];
					updateUser(user);
				}
				setTimeout(() => {
					window.location.href = 'index.html';
				}, 1000);
				// setTimeout(() => {
				// 	window.location.href = 'order-history.html';
				// }, 2000);
			}

			// Save order to database
			function saveOrder(order) {
				const user = getCurrentUser();
				if (user) {
					if (!user.orders) {
						user.orders = [];
					}
					user.orders.push(order);
					setCurrentUser(user);
					
					// Clear cart after successful order
					user.cartItems = [];
					setCurrentUser(user);
					
					showCustomAlert('Order placed successfully!', 'success');
					setTimeout(() => {
						window.location.href = 'order-history.html';
					}, 2000);
				}
			}

			// Generate product image based on type
			function getProductImage(productType, productName='') {
				if (productType === "CPU") {
					return "cpu.png";
				} else if (productType === "GPU") {
					return "gpu.png";
				} else if (productType === "RAM") {
					return "ram.png";
				} else if (productType === "Device") {
					return "shop01.png";
				} else if (productType === "Storage") {
					if (productName.toLowerCase().includes("ssd")) {
						return "ssd.png";
					} 
					else  {
						return "hdd.png";
					}
				} else {
					return "default.png";
				}
			}

			// Update quantity function
			function updateQuantity(productId, newQuantity) {
				if (newQuantity < 1) {
					removeFromCart(productId);
					return;
				}
				
				const cart = getCart();
				const item = cart.find(item => item.productId === productId);
				if (item) {
					item.quantity = newQuantity;
					saveCart(cart);
					loadCheckoutCart();
				}
			}

			// Display current user information
			function displayCurrentUserInfo() {
				const user = getCurrentUser();
				if (!user) {
					return null;
				}
				
				// Extract relevant fields following the user object structure
				const userInfo = {
					id: user.id,
					email: user.email,
					userName: user.userName,
					role: user.role,
					phone: user.phone,
					address: user.address,
					createdAt: user.createdAt,
					wishlist: user.wishlist || [],
					cartItems: user.cartItems || []
				};
				
				return userInfo;
			}

			// Initialize checkout page
			document.addEventListener('DOMContentLoaded', function() {
				try {
					// Check if required functions are available
					if (typeof getCurrentUserId === 'undefined') {
						return;
					}
					if (typeof getCurrentUser === 'undefined') {
						return;
					}
					if (typeof updateAuthLink === 'undefined') {
						return;
					}
					
					// Update authentication link
					updateAuthLink('checkout');
					
					// Check if user is logged in
					const userId = getCurrentUserId();
					
					if (!userId) {
						showCustomAlert('Please log in to access checkout!', 'error');
						setTimeout(() => {
							window.location.href = 'login.html?returnUrl=' + encodeURIComponent(window.location.pathname);
						}, 2000);
						return;
					}

					// Display current user information
					displayCurrentUserInfo();

					// Load cart items
					loadCheckoutCart();
					
					// Update cart and wishlist counts
					updateCartCount();
					updateWishlistCount();
					
					// Add event listener for terms checkbox
					$('#terms').on('change', updatePlaceOrderButton);
					
				} catch (error) {
					// Handle errors silently
				}
			});

			function populateUserInfo() {
				const user = getCurrentUser();
				if (user) {
					$('#user-name').val(user.userName);
					$('#user-email').val(user.email);
					$('#user-phone').val(user.phone);
					$('#user-address').val(user.address);
					// $('#user-notes').val(user.notes);
				}
			}

			// Terms & Conditions Modal Functions
			function showTermsModal() {
				$('#termsModal').modal('show');
			}

			function acceptTerms() {
				$('#terms').prop('checked', true);
				$('#termsModal').modal('hide');
				showCustomAlert('Terms & Conditions accepted!', 'success');
				updatePlaceOrderButton();
			}

			// Payment Modal Functions
			function showPaymentModal(totalAmount) {
				// Update payment method display
				const paymentMethod = selectedPayment === 'bkash' ? 'BKash' : 'Nagad';
				$('#paymentMethodDisplay').text(paymentMethod);
				
				// Update amounts
				const transactionFee = 10.00;
				const totalToPay = totalAmount + transactionFee;
				
				$('#paymentAmountDisplay').text('৳' + totalAmount.toFixed(2));
				$('#paymentTotalDisplay').text('৳' + totalToPay.toFixed(2));
				
				// Clear phone input
				$('#paymentPhone').val('');
				
				// Show modal
				$('#paymentModal').modal('show');
			}

			function confirmPayment() {
				const phoneNumber = $('#paymentPhone').val().trim();
				
				// Validate phone number
				if (!phoneNumber) {
					showCustomAlert('Please enter your mobile number!', 'error');
					return;
				}
				
				if (!/^01[3-9]\d{8}$/.test(phoneNumber)) {
					showCustomAlert('Please enter a valid 11-digit mobile number!', 'error');
					return;
				}
				
				// Close payment modal
				$('#paymentModal').modal('hide');
				
				// Show processing message
				showCustomAlert('Processing payment...', 'info');
				
				// Simulate payment processing
				setTimeout(() => {
					showCustomAlert('Payment successful! Redirecting to order completion...', 'success');
					
					// Process the order
					setTimeout(() => {
						PaymentDone();
					}, 1500);
				}, 2000);
			}

			// Function to update place order button state
			function updatePlaceOrderButton() {
				const termsChecked = $('#terms').is(':checked');
				const placeOrderBtn = $('#place-order-btn');
				
				if (termsChecked) {
					placeOrderBtn.prop('disabled', false);
					placeOrderBtn.removeClass('btn-disabled');
				} else {
					placeOrderBtn.prop('disabled', true);
					placeOrderBtn.addClass('btn-disabled');
				}
			}

			$(document).ready(function() {
				// Fallback initialization if DOMContentLoaded didn't work
				const container = document.getElementById('checkout-cart-items');
				if (container && container.children.length === 0) {
					try {
						updateAuthLink('checkout');
						const userId = getCurrentUserId();
						if (userId) {
							loadCheckoutCart();
							updateCartCount();
							updateWishlistCount();
							populateUserInfo();
							$('#terms').on('change', updatePlaceOrderButton);
						}
					} catch (error) {
						// Handle errors silently
					}
				}
			});
		</script>

	</body>

</html>